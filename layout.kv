#:import CardTransition kivy.uix.screenmanager.CardTransition


<Bordered@Widget>
    color: (1,1,1,1)
    padding: sp(10)
    radius: 10
    line_width: None
    canvas.before:
        Color:
            rgba: self.color
        Line:
            width: self.line_width or 1
            rounded_rectangle: self.x, self.y, self.width, self.height, self.radius

<ImageButton@ButtonBehavior+Image>
    allow_stretch: True


<BorderedButton@ButtonBehavior+Label+Bordered>
    font_size: sp(18)


<Header@BoxLayout>
    orientation: 'horizontal'
    size_hint_y: 0.06
    padding: [12,6,12,6]
    canvas.before:
        Color:
            rgba: 0.1, 0.1, 0.1, 0.5
        BoxShadow:
            pos: self.pos
            size: self.size
            offset: 0, -2
            spread_radius: 3, 3
            border_radius: 6, 6, 6, 6
            blur_radius: 6
    canvas:
        Color:
            rgba: 254/255, 209/255, 153/255, 1
        Rectangle:
            size: self.size
            pos: self.pos

<Footer@Widget>
    size_hint_y: 0.03
    canvas.before:
        Color:
            rgba: 254/255, 209/255, 153/255, 1
        Rectangle:
            size: self.size
            pos: self.pos


<Indicator@Label+Bordered>
    size_hint_x: None
    size: self.texture_size
    font_size: self.height
    font_name: 'assets/fonts/JetBrainsMono-Bold.ttf'
    color: 47/255, 41/255, 34/255, 1
    radius: sp(5)



<Selector@BoxLayout+Bordered>
    orientation: 'horizontal'
    size_hint_y: None
    height: sp(50)
    options: ['Option']
    current_index: 0
    ImageButton:
        size_hint_x: None
        width: self.height
        color: root.color
        source: 'assets/images/left.png'
        on_release:
            root.current_index = (root.current_index - 1) % len(root.options)
    Label:
        font_size: sp(18)
        color: root.color
        text: root.options[root.current_index]
    ImageButton:
        size_hint_x: None
        width: self.height
        color: root.color
        source: 'assets/images/right.png'
        on_release:
            root.current_index = (root.current_index + 1) % len(root.options)


<MainLayout>
    transition: CardTransition()

    Screen:
        name: 'main_screen'

        BoxLayout:
            orientation: 'vertical'
            canvas.before:
                Color:
                    rgba: 47/255, 41/255, 34/255, 1
                Rectangle:
                    size: self.size
                    pos: self.pos

            Header:

                Image:
                    size_hint_x: None
                    width: self.height
                    source: 'assets/images/mine.png'
                    size: self.texture_size
                Label:
                    color: 47/255, 41/255, 34/255, 1
                    font_name: 'assets/fonts/JetBrainsMono-Bold.ttf'
                    font_size: sp(24)
                    text: 'Minesweeper Game'
                Image:
                    size_hint_x: None
                    width: self.height
                    source: 'assets/images/mine.png'
                    size: self.texture_size

            AnchorLayout:
                anchor_x: 'center'
                anchor_y: 'center'

                BoxLayout:
                    orientation: 'vertical'
                    size_hint: 0.75, None
                    height: self.minimum_height
                    spacing: sp(20)

                    Selector:
                        color: 254/255, 209/255, 153/255, 1
                        options: ['Dark', 'Light']
                    Selector:
                        color: 254/255, 209/255, 153/255, 1
                        options: ['Orange', 'Yellow', 'Green', 'Blue', 'Purple', 'Pink', 'Red']
                    Selector:
                        color: 254/255, 209/255, 153/255, 1
                        options: ['Easy', 'Medium', 'Hard']
                    BorderedButton:
                        size_hint_y: None
                        height: sp(50)
                        text: 'Play'
                        color: 254/255, 209/255, 153/255, 1
                        on_release: root.toggle_screen()

            Footer:

    Screen:
        name: 'game_screen'

        BoxLayout:
            orientation: 'vertical'

            Header:
                Indicator:
                    text: '00'
                    line_width: 2
                Widget:
                Indicator:
                    text: '00:00'
                    line_width: 2

            AnchorLayout:
                anchor_x: 'center'
                anchor_y: 'center'
                padding: [10,0,10,20]
                canvas.before:
                    Color:
                        rgba: 254/255, 209/255, 153/255, 1
                    Rectangle:
                        size: self.size
                        pos: self.pos

                GridLayout:

                    canvas.before:
                        Color:
                            rgba: 47/255, 41/255, 34/255, 1
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                            radius: [sp(8)]
                        Color:
                            rgba: 0.1,0.1,0.1,0.8
                        BoxShadow:
                            size: [i - sp(8) for i in self.size]
                            pos: [i + sp(4) for i in self.pos]
                            offset: 0, 0
                            spread_radius: 6, 6
                            border_radius: [sp(12)] * 4
                            blur_radius: sp(12)
                            inset: True

                Button:
                    size_hint: 0.5, 0.5
                    on_release: root.toggle_screen()

